zk.load('zul.wgt',function(){if(zk._p=zkpi('zul.menu'))try{
(function(){function a(b){if(!b._noFloatUp&&!b._bOver&&zul.menu._nOpen){zWatch.fire("onFloatUp",b)}}zul.menu.Menubar=zk.$extends(zul.Widget,{_orient:"horizontal",$define:{orient:function(){this.rerender()},scrollable:function(b){if(this.checkScrollable()){this.rerender()}},autodrop:null},setWidth:function(){this.$supers("setWidth",arguments);this._checkScrolling()},getZclass:function(){return this._zclass==null?"z-menubar"+("vertical"==this.getOrient()?"-ver":"-hor"):this._zclass},unbind_:function(){if(this.checkScrollable()){var c=this.$n("left"),b=this.$n("right");if(c&&b){this.domUnlisten_(c,"onClick","_doScroll").domUnlisten_(c,"onMouseover","_onOver").domUnlisten_(c,"onMouseout","_onOut").domUnlisten_(b,"onClick","_doScroll").domUnlisten_(b,"onMouseover","_onOver").domUnlisten_(b,"onMouseout","_onOut")}zWatch.unlisten({onSize:this})}this._lastTarget=null;this.$supers(zul.menu.Menubar,"unbind_",arguments)},bind_:function(){this.$supers(zul.menu.Menubar,"bind_",arguments);if(this.checkScrollable()){var c=this.$n("left"),b=this.$n("right");if(c&&b){this.domListen_(c,"onClick","_doScroll").domListen_(c,"onMouseover","_onOver").domListen_(c,"onMouseout","_onOut").domListen_(b,"onClick","_doScroll").domListen_(b,"onMouseover","_onOver").domListen_(b,"onMouseout","_onOut")}zWatch.listen({onSize:this})}this._syncChdWidth()},checkScrollable:function(){return this._scrollable&&("horizontal"==this.getOrient())},onSize:function(){this._checkScrolling()},onChildAdded_:function(b){this.$supers("onChildAdded_",arguments);this._checkScrolling();this._syncChdWidth()},onChildRemoved_:function(b){this.$supers("onChildRemoved_",arguments);if(!this.childReplacing_){this._checkScrolling()}this._syncChdWidth()},_checkScrolling:function(){if(!this.checkScrollable()){return}var g=this.$n();if(!g){return}jq(g).addClass(this.getZclass()+"-scroll");if(zk.ie6_){this._doFixWidth(g)}var d=zk(g).offsetWidth(),c=this.$n("body"),h=jq(this.$n("cave")).children(),b=0;for(var e=h.length;e--;){b+=h[e].offsetWidth}var f=d-zk(this.$n("left")).offsetWidth()-zk(this.$n("right")).offsetWidth();if(this._scrolling){if(b<=d){this._scrolling=false;c.scrollLeft=0;if(zk.ie7_){zk(c).redoCSS()}}else{c.style.width=jq.px0(f);this._fixScrollPos(g)}this._fixButtonPos(g)}else{if(b>d){this._scrolling=true;this._fixButtonPos(g);c.style.width=jq.px0(f)}}},_syncChdWidth:function(){var b=-1;if(this.getOrient()=="vertical"){var h=[];for(var c=this.firstChild;c;c=c.nextSibling){if(c.$instanceof(zul.menu.Menu)){var e=c.$n("b");if(e){h.push(c);var f=e.clientWidth;if(f>b){b=f}}}}var d=h.length;while(d-->0){var e=h[d].$n("b"),g=e.clientWidth;if(g<b){jq(e).css("width",b+"px")}}}},_fixScrollPos:function(){var b=this.$n("body"),d=jq(this.$n("cave")).children();if(d[d.length-1].offsetLeft<b.scrollLeft){var c=d[d.length-1].offsetLeft;b.scrollLeft=c}},_fixButtonPos:function(e){var g=this.getZclass(),b=this.$n("body"),f=this.$n("left"),d=this.$n("right"),c=this._scrolling?"addClass":"removeClass";jq(e)[c](g+"-scroll");jq(b)[c](g+"-body-scroll");jq(f)[c](g+"-left-scroll");jq(d)[c](g+"-right-scroll")},_doFixWidth:function(){var c=this.$n(),b=c.style.width;if(zk.ie6_&&(!b||"auto"==b)){this._forceStyle(c,"100%")}},_forceStyle:function(b,c){if(zk.parseInt(c)<0){return}b.style.width=zk.ie6_?"0px":"";b.style.width=c},doMouseOver_:function(b){this._bOver=true;this._noFloatUp=false;this.$supers("doMouseOver_",arguments)},doMouseOut_:function(b){this._bOver=false;this._closeOnOut();this.$supers("doMouseOut_",arguments)},_onOver:function(c){this._bOver=true;if(!this.checkScrollable()){return}var b=c.domTarget,e=this.$n(),f=this.$n("left"),d=this.$n("right"),g=this.getZclass();if(f==b){jq(f).addClass(g+"-left-scroll-over")}else{if(d==b){jq(d).addClass(g+"-right-scroll-over")}}},_onOut:function(c){this._bOver=false;if(!this.checkScrollable()){return}var b=c.domTarget,e=this.$n(),f=this.$n("left"),d=this.$n("right"),g=this.getZclass();if(f==b){jq(f).removeClass(g+"-left-scroll-over")}else{if(d==b){jq(d).removeClass(g+"-right-scroll-over")}}},_doScroll:function(b){var c=b.domTarget;this._scroll(c.id.endsWith("left")?"left":"right")},_scroll:function(k){if(!this.checkScrollable()||this._runId){return}var m=this,f=this.$n("body"),d=f.scrollLeft,g=jq(this.$n("cave")).children(),l=g.length,c=0;if(!l){return}switch(k){case"left":for(var e=0;e<l;e++){if(g[e].offsetLeft>=d||g[e].offsetLeft+(g[e].offsetWidth-f.offsetWidth)>=d){var h=g[e].previousSibling;if(!h){return}c=d-(d-h.offsetLeft);if(isNaN(c)){return}m._runId=setInterval(function(){if(!m._moveTo(f,c)){clearInterval(m._runId);m._runId=null}},10);return}}break;case"right":var b=d+f.offsetWidth;for(var e=0;e<l;e++){var j=g[e].offsetLeft+g[e].offsetWidth;if(j>b){c=d+(j-b);if(isNaN(c)){return}m._runId=setInterval(function(){if(!m._moveTo(f,c)){clearInterval(m._runId);m._runId=null}},10);return}}break}},_moveTo:function(b,d){var f=b.scrollLeft,e=5;if(f==d){return false}if(f>d){var c=f-e;b.scrollLeft=c<d?d:c;return true}else{var c=f+e;b.scrollLeft=c>d?d:c;return true}return false},insertChildHTML_:function(d,b,c){if(b){jq(b.$n("chdextr")||b.$n()).before(this.encloseChildHTML_({child:d,vertical:"vertical"==this.getOrient()}))}else{jq(this.$n("cave")).append(this.encloseChildHTML_({child:d,vertical:"vertical"==this.getOrient()}))}d.bind(c)},removeChildHTML_:function(b){this.$supers("removeChildHTML_",arguments);jq(b.uuid+"-chdextr",zk).remove()},encloseChildHTML_:function(d){var c=d.out||[],e=d.child,b=d.vertical;if(b){c.push('<tr id="',e.uuid,'-chdextr"');if(e.getHeight()){c.push(' height="',e.getHeight(),'"')}c.push(">")}e.redraw(c);if(b){c.push("</tr>")}if(!d.out){return c.join("")}},_closeOnOut:function(){var b=this;if(b._autodrop&&!zul.Widget.getOpenTooltip()){setTimeout(function(){a(b)},200)}}})})();
zkreg('zul.menu.Menubar');zk._m={};
zk._m['default']=function(b){var c=this.uuid;if("vertical"==this.getOrient()){b.push("<div",this.domAttrs_(),'><table id="',c,'-cave"',zUtl.cellps0,">");for(var a=this.firstChild;a;a=a.nextSibling){this.encloseChildHTML_({out:b,child:a,vertical:true})}b.push("</table></div>")}else{var e=this.getZclass(),d;b.push("<div",this.domAttrs_(),">");if(d=this.checkScrollable()){b.push('<div id="',c,'-left" class="',e,'-left"></div>','<div id="',c,'-right" class="',e,'-right"></div>','<div id="',c,'-body" class="',e,'-body">','<div id="',c,'-cnt" class="',e,'-cnt">')}b.push("<table",zUtl.cellps0,">",'<tr valign="bottom" id="',c,'-cave">');for(var a=this.firstChild;a;a=a.nextSibling){a.redraw(b)}b.push("</tr></table>");if(d){b.push("</div></div>")}b.push("</div>")}};
;zkmld(zk._p.p.Menubar,zk._m);(function(){function e(g,f){if(g.isListen("onClick")){if(f){jq(g.$n()).removeClass(g.getZclass()+"-body-clk-over")}else{jq(g.$n()).addClass(g.getZclass()+"-body-clk-over")}}}function c(n,m){if(n.isListen("onClick")){var j=n._getArrowWidth(),h=n.$n(),i=n.isTopmost()?jq(h).find("TABLE"):jq(h),k=zk(i).offsetWidth(),f=k-j,l=zk(i).revisedOffset(),g=m.domEvent.clientX-l[0];if(g>f){jq(n.getAnchor_()).addClass(n.getZclass()+"-body-seld");n.menupopup._shallClose=false;n._togglePopup();m.stop()}else{n.fireX(new zk.Event(n,"onClick",m.data))}}else{jq(n.getAnchor_()).addClass(n.getZclass()+"-body-seld");n.menupopup._shallClose=false;n._togglePopup()}}function d(f){return f.isVisible()&&f.$instanceof(zul.menu.Menu)}function b(h){for(var f=h;f;f=f.nextSibling){if(d(f)){return f}}var g=h.parent;if(g.firstChild==h){return h}return b(g.firstChild)}function a(h){for(var f=h;f;f=f.previousSibling){if(d(f)){return f}}var g=h.parent;if(g.lastChild==h){return h}return a(g.lastChild)}zul.menu.Menu=zk.$extends(zul.LabelImageWidget,{$define:{content:function(g){if(!g||g.length==0){return}if(!this._contentHandler){if(zk.feature.pe){var f=this;zk.load("zkex.inp",null,function(){f._contentHandler=new zkex.inp.ContentHandler(f,g)});return}this._contentHandler=new zul.menu.ContentHandler(this,g)}else{this._contentHandler.setContent(g)}},image:function(f){if(f&&this._preloadImage){zUtl.loadImage(f)}this.rerender()}},open:function(){if(this.desktop&&this.isTopmost()){jq(this.getAnchor_()).addClass(this.getZclass()+"-body-seld");var f=this.getMenubar();if(f._lastTarget){this.$class._rmActive(f._lastTarget)}f._lastTarget=this;this.menupopup._shallClose=false;this._togglePopup()}},getAnchor_:function(){return this.$n("a")},getButton_:function(){return this.$n("b")},domContent_:function(){var g=zUtl.encodeXML(this.getLabel()),f=['<span id="',this.uuid,'-img" class="',this.getZclass(),'-img"'];f.push(this._image?' style="background-image:url('+this._image+')"':"","></span>",g?" "+g:"");return f.join("")},isTopmost:function(){return this._topmost},beforeParentChanged_:function(f){this._topmost=f&&!(f.$instanceof(zul.menu.Menupopup));this.$supers("beforeParentChanged_",arguments)},domStyle_:function(g){var f=this.$supers("domStyle_",arguments);return this.isTopmost()?f+"padding-left:4px;padding-right:4px;":f},onChildAdded_:function(f){this.$supers("onChildAdded_",arguments);if(f.$instanceof(zul.menu.Menupopup)){this.menupopup=f;if(this._contentHandler){this._contentHandler.destroy()}}},onChildRemoved_:function(f){this.$supers("onChildRemoved_",arguments);if(f==this.menupopup){this.menupopup=null;if(this._contentHandler){this._contentHandler.setContent(this._content)}}},getMenubar:function(){for(var f=this.parent;f;f=f.parent){if(f.$instanceof(zul.menu.Menubar)){return f}}return null},onShow:function(){if(this._contentHandler){this._contentHandler.onShow()}},onFloatUp:function(f){if(this._contentHandler){this._contentHandler.onFloatUp(f)}},onHide:function(){if(this._contentHandler){this._contentHandler.onHide()}},focus_:function(g,f){if(this.isTopmost()&&zk(this.getButton_()).focus(g)){if(f){this._ignoreActive=true}return true}return this.$supers("focus_",arguments)},_getPrevVisibleMenu:function(){var f=this.previousSibling;if(!f){var g=this.getMenubar();if(g){f=g.lastChild}}return f?a(f):this},_getNextVisibleMenu:function(){var f=this.nextSibling;if(!f){var g=this.getMenubar();if(g){f=g.firstChild}}return f?b(f):this},doKeyDown_:function(g){if(this.isTopmost()){var i=g.keyCode,j=this.getMenubar();if("vertical"==j.getOrient()){switch(i){case 38:i=37;break;case 40:i=39;break;case 37:i=38;break;case 39:i=40;break}}switch(i){case 38:var f=this.menupopup;if(f&&f.isOpen()){jq(this.getAnchor_()).removeClass(this.getZclass()+"-body-seld");f.close()}this.$class._addActive(this);g.stop();break;case 40:if(this.menupopup){jq(this.getAnchor_()).addClass(this.getZclass()+"-body-seld");this.menupopup._shallClose=false;this.menupopup.open()}g.stop();break;case 37:case 39:var h=i==37?this._getPrevVisibleMenu():this._getNextVisibleMenu();if(h){h.focus()}g.stop();break;case 13:if(this.menupopup){c(this,g)}g.stop();break;case 9:this.$class._rmActive(this);break}}this.$supers("doKeyDown_",arguments)},doFocus_:function(){if(this.isTopmost()){var g=this.getMenubar(),f=this.$class;if(g&&g._lastTarget){f._rmActive(g._lastTarget)}if(!this._ignoreActive){f._addActive(this)}}delete this._ignoreActive;this.$supers("doFocus_",arguments)},bind_:function(){this.$supers(zul.menu.Menu,"bind_",arguments);var g=this.getAnchor_(),f=this._contentType;if(!this.isTopmost()){var h=this.$n();this.domListen_(g,"onFocus","doFocus_").domListen_(g,"onBlur","doBlur_").domListen_(h,"onMouseOver").domListen_(h,"onMouseOut")}else{this.domListen_(this.getButton_(),"onFocus","doFocus_").domListen_(g,"onMouseOver").domListen_(g,"onMouseOut");if(this.isListen("onClick")){jq(this.$n()).addClass(this.getZclass()+"-body-clk")}}if(this._contentHandler){this._contentHandler.bind()}},unbind_:function(){if(!this.isTopmost()){var f=this.getAnchor_(),g=this.$n();this.domUnlisten_(f,"onFocus","doFocus_").domUnlisten_(f,"onBlur","doBlur_").domUnlisten_(g,"onMouseOver").domUnlisten_(g,"onMouseOut")}else{var f=this.getAnchor_();this.domUnlisten_(f,"onMouseOver").domUnlisten_(f,"onMouseOut").domUnlisten_(this.getButton_(),"onFocus","doFocus_")}if(this._contentHandler){this._contentHandler.unbind()}this.$supers(zul.menu.Menu,"unbind_",arguments)},_getArrowWidth:function(){return 20},doClick_:function(f){if(this.menupopup){if(this.isTopmost()){this.getMenubar()._lastTarget=this}c(this,f)}else{var g=this._contentHandler;if(g&&!g.isOpen()){g.onShow()}}},doMouseOver_:function(){if(!this.isTopmost()){var f=this._contentHandler;if(f&&!f.isOpen()){f.onShow()}}this.$supers("doMouseOver_",arguments)},_togglePopup:function(){if(!this.menupopup.isOpen()){if(this.isTopmost()){e(this)}this.menupopup.open()}else{if(this.isTopmost()){this.menupopup.close({sendOnOpen:true})}else{zk(this.menupopup.$n("a")).focus()}}},_doMouseOver:function(f){var h=this.getMenubar();if(h){h._bOver=true;h._noFloatUp=false}if(this.$class._isActive(this)){return}var g=this.isTopmost();if(g){e(this)}if(g&&zk.ie&&!jq.isAncestor(this.getAnchor_(),f.domTarget)){return}if(this.menupopup){this.menupopup._shallClose=false}if(!g){zWatch.fire("onFloatUp",this);if(this.menupopup&&!this.menupopup.isOpen()){this.menupopup.open()}}else{if(this.menupopup&&h._autodrop){zWatch.fire("onFloatUp",this);if(!this.menupopup.isOpen()){this.menupopup.open()}}else{var i=h._lastTarget;if(i&&i!=this&&i.menupopup&&i.menupopup.isVisible()){i.menupopup.close({sendOnOpen:true});this.$class._rmActive(i);if(this.menupopup){this.menupopup.open()}}}}this.$class._addActive(this)},_doMouseOut:function(f){var h=this.getMenubar();if(h){h._bOver=false}this._updateHoverImage();if(!zk.ie&&jq.isAncestor(this.getAnchor_(),f.domEvent.relatedTarget||f.domEvent.toElement)){return}var g=this.isTopmost(),i=this.menupopup;if(g){this.$class._rmActive(this,true);if(i&&h._autodrop){if(i.isOpen()){i._shallClose=true}h._closeOnOut()}}else{if(!i||!i.isOpen()){this.$class._rmActive(this)}else{if(i&&h&&h._autodrop){h._closeOnOut()}}}},getImageNode:function(){if(!this._eimg&&(this._image||this._hoverImage)){var f=this.$n();if(f){this._eimg=this.getButton_()}}return this._eimg},ignoreDescendantFloatUp_:function(f){return f&&f.$instanceof(zul.menu.Menupopup)}},{_isActive:function(i){var h=i.isTopmost(),j=h?i.getAnchor_():i.$n(),g=i.menupopup,f=i.getZclass();f+=h?g&&g.isOpen()?"-body-seld":"-body-over":"-over";return jq(j).hasClass(f)},_addActive:function(j){var h=j.isTopmost(),k=h?j.getAnchor_():j.$n(),g=j.menupopup,f=j.getZclass();f+=h?g&&g.isOpen()?"-body-seld":"-body-over":"-over";jq(k).addClass(f);if(h){var i=j.getMenubar();if(i){i._lastTarget=j}}if(!h&&j.parent.parent.$instanceof(zul.menu.Menu)){this._addActive(j.parent.parent)}},_rmActive:function(k,g){var i=k.isTopmost(),l=i?k.getAnchor_():k.$n(),j=k.getZclass(),f=j+(i?(!g&&k.menupopup.isOpen())?"-body-seld":"-body-over":"-over");var h=jq(l);h.removeClass(f);if(i&&!(h.hasClass(j+"-body-seld")||h.hasClass(j+"-body-over"))){e(k,true)}}});zul.menu.ContentHandler=zk.$extends(zk.Object,{$init:function(g,f){this._wgt=g;this._content=f},setContent:function(f){if(this._content!=f||!this._pp){this._content=f;this._wgt.rerender()}},redraw:function(f){var h=this._wgt,g=h.getZclass();f.push('<div id="',h.uuid,'-cnt-pp" class="',g,'-cnt-pp" style="display:none"><div class="',g,'-cnt-body">',this._content,"</div></div>")},bind:function(){var f=this._wgt;if(!f.menupopup){f.domListen_(f.$n(),"onClick","onShow");zWatch.listen({onFloatUp:f,onHide:f})}this._pp=jq("#"+f.uuid+"-cnt-pp")[0]},unbind:function(){var f=this._wgt;if(!f.menupopup){if(this._shadow){this._shadow.destroy();this._shadow=null}f.domUnlisten_(f.$n(),"onClick","onShow");zWatch.unlisten({onFloatUp:f,onHide:f})}this._pp=null},isOpen:function(){var f=this._pp;return(f&&zk(f).isVisible())},onShow:function(){var g=this._wgt,f=this._pp;if(!f){return}f.style.width=f.style.height="auto";f.style.position="absolute";f.style.overflow="auto";f.style.display="block";f.style.zIndex="88000";jq(f).zk.makeVParent();zWatch.fireDown("onVParent",this);zk(f).position(g.$n(),this.getPosition());this.syncShadow()},onHide:function(){var f=this._pp;if(!f||!zk(f).isVisible()){return}f.style.display="none";jq(f).zk.undoVParent();zWatch.fireDown("onVParent",this);this.hideShadow()},onFloatUp:function(f){if(!zUtl.isAncestor(this._wgt,f.origin)){this.onHide()}},syncShadow:function(){if(!this._shadow){this._shadow=new zk.eff.Shadow(this._wgt.$n("cnt-pp"),{stackup:(zk.useStackup===undefined?zk.ie6_:zk.useStackup)})}this._shadow.sync()},hideShadow:function(){this._shadow.hide()},destroy:function(){this._wgt.rerender()},getPosition:function(){var g=this._wgt;if(g.isTopmost()){var f=g.getMenubar();if(f){return"vertical"==f.getOrient()?"end_before":"after_start"}}return"end_before"},deferRedrawHTML_:function(g){var f=this.isTopmost()?"td":"li";g.push("<",f,this.domAttrs_({domClass:1}),' class="z-renderdefer"></',f,">")}})})();
zkreg('zul.menu.Menu');zk._m={};
zk._m['default']=function(a){var c=this.uuid,e=this.getZclass(),b=zk.ie&&!zk.ie8?"input":"button",d=this._contentHandler;if(this.isTopmost()){a.push('<td align="left"',this.domAttrs_(),'><table id="',c,'-a"',zUtl.cellps0,' class="',e,"-body");if(this.getImage()){a.push(" ",e,"-body");if(this.getLabel()){a.push("-text")}a.push("-img")}a.push('" style="width: auto;"><tbody><tr><td class="',e,'-inner-l"><span class="',e,'-space"></span></td><td class="',e,'-inner-m"><div><',b,' id="',c,'-b" type="button" class="',e,'-btn"');if(this.getImage()){a.push(' style="background-image:url(',this.getImage(),')"')}a.push(">",zUtl.encodeXML(this.getLabel()),"&nbsp;</",b,">");if(this.menupopup){this.menupopup.redraw(a)}else{if(d){d.redraw(a)}}a.push('</div></td><td class="',e,'-inner-r"><span class="',e,'-space"></span></td></tr></tbody></table></td>')}else{a.push("<li",this.domAttrs_(),'><div class="',e,'-cl"><div class="',e,'-cr"><div class="',e,'-cm">');a.push('<a href="javascript:;" id="',c,'-a" class="',e,"-cnt ",e,'-cnt-img">',this.domContent_(),"</a></div></div></div>");if(this.menupopup){this.menupopup.redraw(a)}else{if(d){d.redraw(a)}}a.push("</li>")}};
;zkmld(zk._p.p.Menu,zk._m);(function(){function b(d){zWatch.listen(zk.ie7_?{onSize:d}:{onShow:d});var c;if(c=d._upload){d._uplder=new zul.Upload(d,d._getUploadRef(),c)}}function a(d){var c;if(c=d._uplder){zWatch.unlisten(zk.ie7_?{onSize:d}:{onShow:d});d._uplder=null;c.destroy()}}(zul.menu.Menuitem=zk.$extends(zul.LabelImageWidget,{_value:"",$define:{checkmark:_zkf=function(){this.rerender()},disabled:_zkf,href:_zkf,value:null,checked:function(d){if(d){this._checkmark=d}var f=this.$n("a");if(f&&!this.isTopmost()&&!this.getImage()){var e=this.getZclass(),c=jq(f);c.removeClass(e+"-cnt-ck").removeClass(e+"-cnt-unck");if(this._checkmark){c.addClass(e+(d?"-cnt-ck":"-cnt-unck"))}}},autocheck:null,target:function(d){var c=this.$n("a");if(c){if(this.isTopmost()){c=c.parentNode}c.target=this._target}},autodisable:null,upload:function(c){var d=this.$n();if(d){a(this);if(c&&c!="false"){b(this)}}}},isTopmost:function(){return this._topmost},beforeParentChanged_:function(c){this._topmost=c&&!(c.$instanceof(zul.menu.Menupopup));this.$supers("beforeParentChanged_",arguments)},domClass_:function(e){var d=this.$supers("domClass_",arguments);if(!e||!e.zclass){var c=this.isDisabled()?this.getZclass()+"-disd":"";if(c){d+=(d?" ":"")+c}}return d},domContent_:function(){var d=zUtl.encodeXML(this.getLabel()),c='<span class="'+this.getZclass()+'-img"'+(this._image?' style="background-image:url('+this._image+')"':"")+"></span>";return d?c+" "+d:c},domStyle_:function(d){var c=this.$supers("domStyle_",arguments);return this.isTopmost()?c+"padding-left:4px;padding-right:4px;":c},getMenubar:zul.menu.Menu.prototype.getMenubar,bind_:function(){this.$supers(zul.menu.Menuitem,"bind_",arguments);if(!this.isDisabled()){if(this.isTopmost()){var c=this.$n("a");this.domListen_(c,"onFocus","doFocus_").domListen_(c,"onBlur","doBlur_")}if(this._upload){b(this)}}},unbind_:function(){if(!this.isDisabled()){if(this._upload){a(this)}if(this.isTopmost()){var c=this.$n("a");this.domUnlisten_(c,"onFocus","doFocus_").domUnlisten_(c,"onBlur","doBlur_")}}this.$supers(zul.menu.Menuitem,"unbind_",arguments)},doClick_:function(c){if(this._disabled){c.stop()}else{if(!this._canActivate(c)){return}if(!this._upload){zul.wgt.ADBS.autodisable(this)}var d=this.isTopmost(),f=this.$n("a");if(d){jq(f).removeClass(this.getZclass()+"-body-over");f=f.parentNode}if(f.href.startsWith("javascript:")){if(this.isAutocheck()){this.setChecked(!this.isChecked());this.fire("onCheck",this.isChecked())}this.fireX(c)}else{if(zk.ie&&d&&this.$n().id!=f.id){zUtl.go(f.href,{target:f.target})}if(zk.gecko&&d&&this.$n().id!=f.id){zUtl.go(f.href,{target:f.target});c.stop()}}if(!d){for(var g=this.parent;g;g=g.parent){if(g.$instanceof(zul.menu.Menupopup)){if(!g.isOpen()||this._uplder){break}this._updateHoverImage();g.close({sendOnOpen:true})}else{if(!g.$instanceof(zul.menu.Menu)){break}else{g._updateHoverImage()}}}}var e;if(zk.safari&&(e=this.getMenubar())&&e._autodrop){e._noFloatUp=true}this.$class._rmActive(this);this.$super("doClick_",c,true)}},_canActivate:function(c){return !this.isDisabled()&&(!zk.ie||!this.isTopmost()||this._uplder||jq.isAncestor(this.$n("a"),c.domTarget))},_getUploadRef:function(){return this.isTopmost()?this.$n():this.$n("a")},doMouseOver_:function(c){var d=this.getMenubar();if(d){d._bOver=true;d._noFloatUp=false}if(!this.$class._isActive(this)&&this._canActivate(c)){this.$class._addActive(this);if(zul.menu._nOpen||!this.isTopmost()){zWatch.fire("onFloatUp",this)}}this.$supers("doMouseOver_",arguments)},doMouseOut_:function(e){var f=this.getMenubar();if(f){f._bOver=false;f._closeOnOut()}if(!this.isDisabled()){var d=!zk.ie;if(!d){var j=this.$n("a"),h=zk(j).revisedOffset(),c=e.pageX,i=e.pageY,g=this.isTopmost()?1:0;d=c-g<=h[0]||c>h[0]+j.offsetWidth||i-g<=h[1]||i>h[1]+j.offsetHeight+(zk.ie?-1:0)}if(d){this.$class._rmActive(this)}}this.$supers("doMouseOut_",arguments)},deferRedrawHTML_:function(d){var c=this.isTopmost()?"td":"li";d.push("<",c,this.domAttrs_({domClass:1}),' class="z-renderdefer"></',c,">")},getImageNode:function(){if(!this._eimg&&(this._image||this._hoverImage)){var c=this.$n();if(c){this._eimg=this.$n("b")||this.$n("a").firstChild}}return this._eimg}},{_isActive:function(e){var d=e.isTopmost(),f=d?e.$n("a"):e.$n(),c=e.getZclass()+(d?"-body-over":"-over");return jq(f).hasClass(c)},_addActive:function(e){var d=e.isTopmost(),f=d?e.$n("a"):e.$n(),c=e.getZclass()+(d?"-body-over":"-over");jq(f).addClass(c);if(!d&&e.parent.parent.$instanceof(zul.menu.Menu)){this._addActive(e.parent.parent)}},_rmActive:function(e){var d=e.isTopmost(),f=d?e.$n("a"):e.$n(),c=e.getZclass()+(d?"-body-over":"-over");jq(f).removeClass(c)}})).prototype[zk.ie7_?"onSize":"onShow"]=function(){if(this._uplder){this._uplder.sync()}}})();
zkreg('zul.menu.Menuitem');zk._m={};
zk._m['default']=function(c){var f=this.uuid,h=this.getZclass(),e=zk.ie&&!zk.ie8?"input":"button",g=this.getTarget(),b=this.getImage();if(this.isTopmost()){c.push('<td align="left"',this.domAttrs_(),'><a href="',this.getHref()?this.getHref():"javascript:;",'"');if(g){c.push(' target="',g,'"')}c.push(' class="',h,'-cnt"><table id="',f,'-a"',zUtl.cellps0,' class="',h,"-body");if(b){c.push(" ",h,"-body");if(this.getLabel()){c.push("-text")}c.push("-img")}c.push('" style="width: auto;"><tbody><tr><td class="',h,'-inner-l"><span class="',h,'-space"></span></td><td class="',h,'-inner-m"><div><',e,' id="',f,'-b" type="button" class="',h,'-btn"');if(b){c.push(' style="background-image:url(',b,')"')}c.push(">",zUtl.encodeXML(this.getLabel()),"&nbsp;</",e,'></div></td><td class="',h,'-inner-r"><span class="',h,'-space"></span></td></tr></tbody></table></a></td>')}else{c.push("<li",this.domAttrs_(),'><div class="',h,'-cl"><div class="',h,'-cr"><div class="',h,'-cm">');var a=h+"-cnt"+(!b&&this.isCheckmark()?" "+h+(this.isChecked()?"-cnt-ck":"-cnt-unck"):""),d=this.getMold();c.push('<a href="',this.getHref()?this.getHref():"javascript:;",'"');if(g){c.push(' target="',g,'"')}c.push(' id="',f,'-a" class="',a,'">',this.domContent_(),"</a></div></div></div></li>")}};
;zkmld(zk._p.p.Menuitem,zk._m);zul.menu.Menuseparator=zk.$extends(zul.Widget,{isPopup:function(){return this.parent&&this.parent.$instanceof(zul.menu.Menupopup)},getMenubar:function(){for(var a=this.parent;a;a=a.parent){if(a.$instanceof(zul.menu.Menubar)){return a}}return null},doMouseOver_:function(){if(zul.menu._nOpen){zWatch.fire("onFloatUp",this)}this.$supers("doMouseOver_",arguments)}});
zkreg('zul.menu.Menuseparator');zk._m={};
zk._m['default']=function(a){var b=this.isPopup()?"li":"td";a.push("<",b,this.domAttrs_(),'><span class="',this.getZclass(),'-inner">&nbsp;</span></',b,">")};
;zkmld(zk._p.p.Menuseparator,zk._m);(function(){function f(k){var j=k.parent;return j.$instanceof(zul.menu.Menu)?j:null}function h(k){for(var j=k;j&&(j=f(j));j=j.parent){if(j.isTopmost()){return j}}return null}function d(j){return j.isVisible()&&(j.$instanceof(zul.menu.Menu)||(j.$instanceof(zul.menu.Menuitem)&&!j.isDisabled()))}function i(k,l){if(l){while(l=l.previousSibling){if(d(l)){k._curIndex--;return l}}}k._curIndex=-1;for(var j=k.firstChild;j;j=j.nextSibling){if(d(j)){l=j;k._curIndex++}}return l}function a(k,l){if(l){while(l=l.nextSibling){if(d(l)){k._curIndex++;return l}}}for(var j=k.firstChild;j;j=j.nextSibling){if(d(j)){k._curIndex=0;return j}}}function g(j,m){var k=-1;for(var l=j.firstChild;l;l=l.nextSibling){if(d(l)){k++}if(l==m){return k}}return k}function e(l){var n=l._curIndex;if(n>=0){for(var j=l.firstChild,m=0;j;j=j.nextSibling){if(d(j)&&m++==n){return j}}}}function b(k){var j=k.menupopup;if(j){j._shallClose=false;if(!j.isOpen()){j.open()}}k.$class._addActive(k);zWatch.fire("onFloatUp",k)}function c(k){var j;if((j=k.menupopup)){if(j.isOpen()){j.close()}else{j.open()}}else{if((j=k._contentHandler)){if(j.isOpen()){j.onHide()}else{j.onShow()}}}}zul.menu.Menupopup=zk.$extends(zul.wgt.Popup,{_curIndex:-1,zsync:function(){this.$supers("zsync",arguments);if(!this._shadow){this._shadow=new zk.eff.Shadow(this.$n())}this._shadow.sync()},_hideShadow:function(){if(this._shadow){this._shadow.hide()}},close:function(){if(this.isOpen()){zul.menu._nOpen--}this.$supers("close",arguments);jq(this.$n()).hide();this._hideShadow();var k;if((k=f(this))&&k.isTopmost()){jq(k.getAnchor_()).removeClass(k.getZclass()+"-body-seld")}var j=e(this);if(j){j.$class._rmActive(j)}this._curIndex=-1;this.$class._rmActive(this)},open:function(l,p,j,k){if(!this.isOpen()){zul.menu._nOpen++}var o;if(o=f(this)){if(!p){l=o.getAnchor_();if(!j){if(o.isTopmost()){j=o.parent.getOrient()=="vertical"?"end_before":"after_start"}else{j="end_before"}}}}this.$super("open",l,p,j,k||{sendOnOpen:true,disableMask:true});var m;if(o&&o.isTopmost()&&(m=o.getMenubar())&&m.getOrient()=="horizontal"){var q;if(q=this.$n()){q.style.top=jq.px0(zk.parseInt(q.style.top)+zk.parseInt(jq(this.getMenubar()).css("paddingBottom")))}}},shallStackup_:function(){return false},setTopmost:function(){this.$supers("setTopmost",arguments);this.zsync()},onFloatUp:function(j){if(!this.isVisible()){return}var m=j.origin;if(this.parent.menupopup==this&&!this.parent.isTopmost()&&!this.parent.$class._isActive(this.parent)){this.close({sendOnOpen:true});return}for(var l,k=m;k;k=k.parent){if(k==this||(k.menupopup==this&&!this._shallClose)){if(!l){this.setTopmost()}return}l=l||k.isFloating_()}if(m&&m.ignoreDescendantFloatUp_(this)){for(var l,k=this;k=k.parent;){if(k==m){if(this._shallClose){break}if(!l){this.setTopmost()}return}l=l||k.isFloating_()}}this.close({sendOnOpen:true})},onShow:function(){if(zk.ie7_){var j=this.$n();if(!j.style.width){var k=this.$n("cave");if(k.childNodes.length){j.style.width=k.offsetWidth+zk(j).padBorderWidth()+"px"}}}this.zsync();var l=this.$n("a");if(l){if(zk(l).isRealVisible()){l.focus();zk.currentFocus=this}}},onHide:function(){if(this.isOpen()){this.close()}this._hideShadow()},bind_:function(){this.$supers(zul.menu.Menupopup,"bind_",arguments);zWatch.listen({onHide:this,onResponse:this});if(!zk.css3){jq.onzsync(this)}},unbind_:function(){if(this.isOpen()){this.close()}if(this._shadow){this._shadow.destroy()}if(!zk.css3){jq.unzsync(this)}this._shadow=null;zWatch.unlisten({onHide:this,onResponse:this});this.$supers(zul.menu.Menupopup,"unbind_",arguments)},onResponse:function(){if(!this.isOpen()){return}if(zk.ie7_){var j=this.$n();j.style.width="";var k=this.$n("cave");if(k.childNodes.length){j.style.width=k.offsetWidth+zk(j).padBorderWidth()+"px"}}this.zsync();this.$supers("onResponse",arguments)},doKeyDown_:function(m){var l=e(this),p,o=m.keyCode;switch(o){case 38:case 40:if(l){l.$class._rmActive(l)}l=o==38?i(this,l):a(this,l);if(l){l.$class._addActive(l)}break;case 37:if(l&&l.$instanceof(zul.menu.Menu)&&l._contentHandler&&l._contentHandler.isOpen()){l._contentHandler.onHide()}else{if(((p=f(this)))&&!p.isTopmost()){this.close();p.$class._addActive(p);var k=p.parent;if(k){var n=k.$n("a");if(n){n.focus()}k._curIndex=g(k,p)}}else{var j=h(this);if(j&&(j=j._getPrevVisibleMenu())){b(j)}else{this.close()}}}break;case 39:if(l&&l.$instanceof(zul.menu.Menu)){c(l)}else{var j=h(this);if(j&&(j=j._getNextVisibleMenu())){b(j)}}break;case 13:if(l&&l.$instanceof(zul.menu.Menuitem)){l.doClick_(new zk.Event(l,"onClick",{}));zWatch.fire("onFloatUp",l);this.close({sendOnOpen:true})}else{if(l&&l.$instanceof(zul.menu.Menu)){c(l)}else{if((p=f(this))){this.close();if(p.isTopmost()){p.focus()}else{p.$class._addActive(p);var k=p.parent;if(k){var n=k.$n("a");if(n){n.focus()}}}}}}break;case 27:if((p=f(this))){if(p.isTopmost()){this.close();p.focus()}else{if(p._contentHandler&&p._contentHandler.isOpen()){content.onHide()}else{this.close();p.$class._addActive(p);var k=p.parent;if(k){var n=k.$n("a");if(n){n.focus()}}}}}break;case 9:var j=h(this);if(j){j.focus_(undefined,zk.ie)}this.close();break}if(o!=9){m.stop()}this.$supers("doKeyDown_",arguments)},getMenubar:zul.menu.Menu.prototype.getMenubar,doMouseOver_:function(j){var k=this.getMenubar();if(k){k._bOver=true}this._shallClose=false;this.$supers("doMouseOver_",arguments)},doMouseOut_:function(j){var k=this.getMenubar();if(k){k._bOver=false}this.$supers("doMouseOut_",arguments)}},{_rmActive:function(j){if(j.parent.$instanceof(zul.menu.Menu)){j.parent.$class._rmActive(j.parent)}}});zul.menu._nOpen=0})();
zkreg('zul.menu.Menupopup');zk._m={};
zk._m['default']=function(c){var d=this.uuid,e=this.getZclass(),b=zk.ie||zk.gecko?"a":"button";c.push("<div",this.domAttrs_(),"><",b,' id="',d,'-a" tabindex="-1" onclick="return false;" href="javascript:;"',' class="z-focus-a"></',b,'><ul class="',e,'-cnt" id="',d,'-cave">');for(var a=this.firstChild;a;a=a.nextSibling){a.redraw(c)}c.push("</ul></div>")};
;zkmld(zk._p.p.Menupopup,zk._m);
}finally{zk.setLoaded(zk._p.n);}});zk.setLoaded('zul.menu',1);